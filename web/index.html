<!DOCTYPE html>
<html>
<head>
    <title>Xyrix AI Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="/eel.js"></script>
</head>
<body>
    <div class="particle-container"></div>
    <div class="animated-background">
        <div class="ai-circuit"></div>
        <div class="ai-neon-grid"></div>
        <div class="ai-hologram"></div>
    </div>
    
    <!-- Main Page Content -->
    <div id="main-page">
        <div class="main-container">
            <div class="orbital-wrapper">
                <div class="quantum-orbit">
                    <div class="assistant-name">Xyrix</div>
                </div>
                <div class="orbital-particles"></div>
            </div>

            <div class="control-container">
                <div class="glass-panel">
                    <div class="input-container">
                        <input type="text" class="command-input" placeholder="Type your command...">
                        <div class="icon-btn send-btn" onclick="checkPinBeforeAction('text')">
                            <div class="icon-aura"></div>
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="icon-group">
                        <div class="icon-btn mic-btn" onclick="checkPinBeforeAction('voice')">
                            <div class="icon-aura"></div>
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5-3c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                            </svg>
                        </div>
                        <div class="icon-btn" onclick="toggleChatHistory()">
                            <div class="icon-aura"></div>
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                            </svg>
                        </div>
                        <div class="icon-btn" onclick="showSettings()">
                            <div class="icon-aura"></div>
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.3-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.09-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.3.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat History Panel -->
    <div class="chat-history-panel">
        <div class="chat-header">
            <h3>Chat History</h3>
            <div>
                <div class="clear-btn" onclick="clearChatHistory()" title="Clear History">
                    <svg style="width:20px;height:20px" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                    </svg>
                </div>
                <div class="close-btn" onclick="toggleChatHistory()">&times;</div>
            </div>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
    </div>

    <!-- Settings Panel -->
    <div class="settings-panel">
        <div class="settings-header">
            <h3>Settings</h3>
            <div class="close-btn" onclick="hideSettings()">&times;</div>
        </div>
        <div class="settings-content">
            <div class="setting-option" onclick="clearChatHistory()">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#ff4444" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                </svg>
                Clear Chat History
            </div>
            <div class="setting-option" onclick="toggleDarkMode()">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#00f3ff" d="M7.5,2C5.71,3.15 4.5,5.18 4.5,7.5C4.5,9.82 5.71,11.85 7.53,13C4.46,13 2,10.54 2,7.5A5.5,5.5 0 0,1 7.5,2M19.07,3.5L20.5,4.93L4.93,20.5L3.5,19.07L19.07,3.5M12.89,5.93L11.41,5L9.97,6L10.39,4.3L9,3.24L10.75,3.12L11.33,1.47L12,3.1L13.73,3.13L12.38,4.26L12.89,5.93M9.59,9.54L8.43,8.81L7.31,9.59L7.65,8.27L6.56,7.44L7.92,7.35L8.37,6.06L8.88,7.33L10.24,7.36L9.19,8.23L9.59,9.54M19,13.5A5.5,5.5 0 0,1 13.5,19C12.28,19 11.15,18.6 10.24,17.93L17.93,10.24C18.6,11.15 19,12.28 19,13.5M14.6,20.08L17.37,18.93L17.13,22.28L14.6,20.08M18.93,17.38L20.08,14.61L22.28,17.13L18.93,17.38M20.08,12.42L18.94,9.64L22.28,9.88L20.08,12.42M9.63,18.93L12.4,20.08L9.87,22.27L9.63,18.93Z"/>
                </svg>
                Toggle Dark Mode
            </div>
            <div class="setting-option" onclick="showPinSettings()">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#00f3ff" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                </svg>
                PIN Settings
            </div>
            <div class="setting-option" onclick="openDrawingPage()">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#00f3ff" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                </svg>
                Drawing Canvas
            </div>
        </div>
    </div>

    <!-- PIN Settings Modal -->
    <div class="pin-modal">
        <div class="pin-content">
            <h3>PIN Settings</h3>
            <div class="pin-input-container">
                <input type="password" id="newPin" placeholder="Enter new PIN (4 digits)" maxlength="4" class="pin-input">
                <input type="password" id="confirmPin" placeholder="Confirm PIN" maxlength="4" class="pin-input">
            </div>
            <div class="pin-toggle">
                <label class="switch">
                    <input type="checkbox" id="pinEnabled">
                    <span class="slider"></span>
                </label>
                <span>Enable PIN Protection</span>
            </div>
            <div class="pin-actions">
                <button class="pin-btn" onclick="savePinSettings()">Save</button>
                <button class="pin-btn cancel" onclick="closePinSettings()">Cancel</button>
            </div>
        </div>
    </div>

    <div class="activation-overlay">
        <div class="response-container">
            <div class="response-text" id="aiResponse">Hello, I am Xyrix</div>
        </div>
        <div class="wave-container"></div>
        <div class="timer-display">
            <span id="minutes">00</span>:<span id="seconds">00</span>
        </div>
    </div>

    <!-- PIN Entry Overlay -->
    <div class="pin-overlay">
        <div class="pin-container">
            <h3>Enter PIN</h3>
            <div class="pin-display" id="pinDisplay">••••</div>
            <div class="pin-error" id="pinError"></div>
            <div class="pin-grid">
                <div class="pin-row">
                    <button class="pin-btn" onclick="addPinDigit('1')">1</button>
                    <button class="pin-btn" onclick="addPinDigit('2')">2</button>
                    <button class="pin-btn" onclick="addPinDigit('3')">3</button>
                </div>
                <div class="pin-row">
                    <button class="pin-btn" onclick="addPinDigit('4')">4</button>
                    <button class="pin-btn" onclick="addPinDigit('5')">5</button>
                    <button class="pin-btn" onclick="addPinDigit('6')">6</button>
                </div>
                <div class="pin-row">
                    <button class="pin-btn" onclick="addPinDigit('7')">7</button>
                    <button class="pin-btn" onclick="addPinDigit('8')">8</button>
                    <button class="pin-btn" onclick="addPinDigit('9')">9</button>
                </div>
                <div class="pin-row">
                    <button class="pin-btn" onclick="clearPin()">C</button>
                    <button class="pin-btn" onclick="addPinDigit('0')">0</button>
                    <button class="pin-btn" onclick="submitPin()">↵</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Drawing Page (hidden by default) -->
    <div id="drawing-page" class="hidden-page">
        <div class="drawing-header">
            <h2>Xyrix Drawing Canvas</h2>
            <button class="back-btn" onclick="closeDrawingPage()">Back to Assistant</button>
        </div>
        <canvas id="drawingCanvas"></canvas>
        <div class="drawing-controls">
            <div class="color-picker">
                <div class="color-btn red" onclick="setDrawingColor('red')"></div>
                <div class="color-btn blue" onclick="setDrawingColor('blue')"></div>
                <div class="color-btn green" onclick="setDrawingColor('green')"></div>
                <div class="color-btn yellow" onclick="setDrawingColor('yellow')"></div>
                <div class="color-btn purple" onclick="setDrawingColor('purple')"></div>
                <div class="color-btn orange" onclick="setDrawingColor('orange')"></div>
                <div class="color-btn pink" onclick="setDrawingColor('pink')"></div>
                <div class="color-btn cyan" onclick="setDrawingColor('cyan')"></div>
                <div class="color-btn white" onclick="setDrawingColor('white')"></div>
                <div class="color-btn black" onclick="setDrawingColor('black')"></div>
            </div>
            <div class="brush-controls">
                <button class="brush-btn small" onclick="setBrushSize(2)">Small</button>
                <button class="brush-btn medium" onclick="setBrushSize(5)">Medium</button>
                <button class="brush-btn large" onclick="setBrushSize(10)">Large</button>
            </div>
            <div class="shape-controls">
                <button class="shape-btn" onclick="drawShape('circle')">Circle</button>
                <button class="shape-btn" onclick="drawShape('rectangle')">Rectangle</button>
                <button class="shape-btn" onclick="drawShape('triangle')">Triangle</button>
            </div>
            <div class="action-controls">
                <button class="action-btn clear" onclick="clearCanvas()">Clear</button>
                <button class="action-btn toggle" onclick="toggleDrawingMode()">Toggle Draw</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>